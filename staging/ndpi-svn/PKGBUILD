# Maintainer: ArchAssault <team@archassault.org>
# Contributor: M0Rf30
pkgname=ndpi-svn
pkgver=7385
pkgrel=1
pkgdesc="Open and Extensible GPLv3 Deep Packet Inspection Library"
arch=('i686' 'x86_64' 'armv7h' 'armv6h')
url="http://www.ntop.org/products/ndpi/"
license=('GPL3')
depends=('glibc')
makedepends=('subversion' 'automake-1.11')
replaces=('ndpi')
conflicts=('ndpi')
source=('ndpi::svn+https://svn.ntop.org/svn/ntop/trunk/nDPI'
	patch)
sha512sums=('SKIP'
            '2c22a8c7dfe2e1d1614d6499122dc3cc07e2b47244edc390db5b04716e54d04a1e9f5b17422f9c58fede27c84e2bf0c36e6fa06904797560acfa34356a686ef9')

pkgver() {
  cd ndpi
  svnversion | tr -d [A-z]
}

build() {
  cd ndpi
  ./configure --prefix=/usr --with-pic
  patch -Np1 -i ../patch
  make CFLAGS="$CFLAGS -O -Wcpp"
}
         
package() {
  cd ndpi
  make DESTDIR="$pkgdir" install
  cp src/include/*.h $pkgdir/usr/include/libndpi/
}

