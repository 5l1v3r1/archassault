# Maintainer: Gagou <gagou@rez-gif.supelec.fr>
pkgname=liblcfg
pkgver=r24.750bc90
pkgrel=1
pkgdesc="A lightweight configuration file library written in C99"
url="http://liblcfg.carnivore.it/"
license=(GPL)
arch=('i686' 'x86_64' 'armv6h' 'armv7h')
depends=(glibc)
makdepends=('git')
sha512sums=('SKIP'
            'db1d1cd57fb7d450c0bf498b8f8f400650b7a55e734d374f889a844436dff4e92f656c359a5050ff6819a5ef07e1db86f2b5e523355d8e7b9b510de32a8ea818')
source=("$pkgname::git://git.carnivore.it/liblcfg.git"
        "Makefile.patch")

pkgver() {
  cd "$srcdir/$pkgname"
  printf "r%s.%s" "$(git rev-list --count HEAD)" "$(git rev-parse --short HEAD)"
}


build() {
 cd "$srcdir/$pkgname/code"

  sed -i s/AM_CONFIG_HEADER/AC_CONFIG_HEADERS/g ./configure.ac 
  autoreconf -i
  ./configure --prefix=/usr --sysconfdir=/etc --localstatedir=/var
  patch -i $srcdir/Makefile.patch
  make
}
package() {
  cd "$srcdir/$pkgname/code"
  make DESTDIR=$pkgdir install
}
