# Maintainer: ArchAssault <team@archassault.org>
pkgname=fern-wifi-cracker
pkgver=133
pkgrel=3
groups=('archassault' 'archassault-wireless' 'archassault-cracker')
pkgdesc="WEP, WPA wifi cracker for wireless penetration testing"
arch=('any')
url='http://code.google.com/p/fern-wifi-cracker/'
license=('GPL2')
depends=('python2' 'python2-pyqt4' 'aircrack-ng' 'xterm' 'subversion' 'python2-scapy' 'macchanger')
makedepends=('subversion')
_svnmod="fern-wifi-cracker"
source=("svn+http://fern-wifi-cracker.googlecode.com/svn/Fern-Wifi-Cracker/")
md5sums=('SKIP')

package() {
  cd "$srcdir/Fern-Wifi-Cracker"

  install -dm755 "$pkgdir/usr/bin"
  install -dm755 "$pkgdir/usr/share/fern-wifi-cracker"

  cp -R --no-preserve=ownership * "$pkgdir/usr/share/fern-wifi-cracker"

  sed -i 's|#!/usr/bin/env python|#!/usr/bin/env python2|' "$pkgdir"/usr/share/fern-wifi-cracker/execute.py
  # Make joint script.
  cat > "$pkgdir/usr/bin/fern" <<EOF
#!/bin/sh
cd /usr/share/fern-wifi-cracker
python2 ./execute.py "\$@"
EOF

  chmod +x "$pkgdir/usr/bin/fern"
}
