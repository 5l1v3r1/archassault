# Maintainer: ArchAssault <team@archassault.org>
pkgname=bamfdetect
pkgver=1.5.1
pkgrel=1
pkgdesc="Identifies and extracts information from bots and other malware"
url="https://github.com/bwall/bamfdetect"
arch=('any')
license=('MIT')
groups=('archassault' 'archassault-malware')
depends=('python2')
makedepends=('python2-setuptools')
conflicts=('bamf-git')
replaces=('bamf-git')
source=("https://github.com/bwall/bamfdetect/archive/v$pkgver.tar.gz")
sha512sums=('afb479b3a8caf899674429396aef1df0534976c8563ba15a635c269076acdb11c161fee53efe62439002cb100e60a326074e0679e60a9bd3f1f493737600a41d')

prepare() {
  find "${srcdir}" -type f -name '*.py' | xargs sed -i 's|#!/usr/bin/env python|#!/usr/bin/env python2|'
  find "${srcdir}" -type f -name '*.py' | xargs sed -i 's|#!/usr/bin/python|#!/usr/bin/python2|'
}

package() {
  cd "$srcdir/bamfdetect-$pkgver"
  python2 setup.py install --root=$pkgdir --optimize=1
  install -Dm644 LICENSE "$pkgdir/usr/share/licenses/$pkgname/LICENSE"
  
}


