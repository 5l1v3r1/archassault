# Maintainer: ArchAssault <team@archassault.org>
pkgname=bamfdetect
pkgver=1.6.3
pkgrel=1
pkgdesc="Identifies and extracts information from bots and other malware"
url="https://github.com/bwall/bamfdetect"
arch=('any')
license=('MIT')
groups=('archassault' 'archassault-malware')
depends=('python2')
makedepends=('python2-setuptools')
conflicts=('bamf-git')
replaces=('bamf-git')
source=("https://github.com/bwall/bamfdetect/archive/v$pkgver.tar.gz")
sha512sums=('33dced7576656b46d934c4e295dd2fedfaa7769d6b082bac2612b26245f038335dc05c6393a3ea3d6d5995552cacdce4e0c4bf80eb67930e2a558f090be473ba')

prepare() {
  find "${srcdir}" -type f -name '*.py' | xargs sed -i 's|#!/usr/bin/env python|#!/usr/bin/env python2|'
  find "${srcdir}" -type f -name '*.py' | xargs sed -i 's|#!/usr/bin/python|#!/usr/bin/python2|'
}

package() {
  cd "$srcdir/bamfdetect-$pkgver"
  python2 setup.py install --root=$pkgdir --optimize=1
  install -Dm644 LICENSE "$pkgdir/usr/share/licenses/$pkgname/LICENSE"
  
}


